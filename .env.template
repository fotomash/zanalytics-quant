# =============================================================================
# ZANALYTICS QUANT - ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!

# -----------------------------------------------------------------------------
# CORE DATABASE SETTINGS
# -----------------------------------------------------------------------------
POSTGRES_DB=zanalytics
# Username for the Postgres connection
POSTGRES_USER=postgres
# Password for the Postgres user
POSTGRES_PASSWORD=your_secure_postgres_password_here
# Hostname of the Postgres service
POSTGRES_HOST=postgres
# Port where Postgres listens
POSTGRES_PORT=5432
# Complete Postgres DSN used by async services
PG_DSN=postgresql://postgres:your_secure_postgres_password_here@postgres:5432/zanalytics

# -----------------------------------------------------------------------------
# REDIS SETTINGS
# -----------------------------------------------------------------------------
# Connection URL for Redis cache/broker
REDIS_URL=redis://redis:6379/0
# Optional Redis instance for stream operations (defaults to REDIS_URL)
REDIS_STREAMS_URL=redis://redis:6379/0
# Hostname for Redis
REDIS_HOST=redis
# Port for Redis
REDIS_PORT=6379

# Optional cache TTLs
SESSION_BOOT_TTL=30
TRADES_RECENT_TTL=15
RISK_STATUS_TTL=20

# -----------------------------------------------------------------------------
# DJANGO SETTINGS
# -----------------------------------------------------------------------------
DJANGO_SECRET_KEY=your-super-secret-django-key-change-this-in-production
DJANGO_SETTINGS_MODULE=app.settings
DJANGO_DOMAIN=django.localhost
DJANGO_API_URL=http://django:8000
DJANGO_API_PREFIX=/api/v1

# -----------------------------------------------------------------------------
# MCP SERVER SETTINGS
# -----------------------------------------------------------------------------
# API key required for MCP requests; set to a strong secret in production
MCP_API_KEY=your_mcp_api_key_here

# Confidence cutoff for using local echo model; higher value sends more ticks to Whisperer
LOCAL_THRESHOLD=0.6
# Name or path to the local LLM model used when external APIs are skipped
LOCAL_LLM_MODEL=ggml-model.bin
# Set to "true" to persist journal events to Kafka instead of Redis
USE_KAFKA_JOURNAL=false

# -----------------------------------------------------------------------------
# OPENAI SETTINGS
# -----------------------------------------------------------------------------
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4o-mini

# -----------------------------------------------------------------------------
# FRONTEND/DASHBOARD DEFAULTS
# -----------------------------------------------------------------------------
# Default symbol for Streamlit pages if API doesn't return symbols
PULSE_DEFAULT_SYMBOL=XAUUSD
# Optional: override the Pulse playbook path
PULSE_PLAYBOOK_PATH=
# Optional: force a cache directory for dashboards
ZAN_CACHE_DIR=

# Optional: override Pulse confluence weights as JSON
# Example gives Wyckoff highest weight by design (sum to ~1.0):
# PULSE_CONF_WEIGHTS={"context":0.15,"liquidity":0.15,"structure":0.25,"imbalance":0.10,"risk":0.10,"wyckoff":0.25}
PULSE_CONF_WEIGHTS=

# -----------------------------------------------------------------------------
# TRAEFIK & SSL SETTINGS
# -----------------------------------------------------------------------------
TRAEFIK_DOMAIN=traefik.localhost
TRAEFIK_USERNAME=admin
# Generate with: echo $(htpasswd -nb admin your_password) | sed -e s/\$/\$\$/g
TRAEFIK_HASHED_PASSWORD=$$2y$$10$$example_hash_replace_this
ACME_EMAIL=your-email@example.com

# -----------------------------------------------------------------------------
# DOMAIN MAPPINGS
# -----------------------------------------------------------------------------
VNC_DOMAIN=vnc.localhost
API_DOMAIN=api.localhost
DASHBOARD_DOMAIN=dash.localhost
GRAFANA_DOMAIN=grafana.localhost
INFO_DOMAIN=info.localhost

# -----------------------------------------------------------------------------
# WORDPRESS SETTINGS
# -----------------------------------------------------------------------------
WORDPRESS_DB_HOST=mysql
WORDPRESS_DB_USER=wp_user
WORDPRESS_DB_PASSWORD=your_secure_wordpress_db_password_here
WORDPRESS_DB_NAME=wordpress

# -----------------------------------------------------------------------------
# MT5 SETTINGS
# -----------------------------------------------------------------------------
MT5_API_URL=http://mt5:5001
MT5_API_BASE=http://mt5:5001
CUSTOM_USER=your_mt5_username
PASSWORD=your_mt5_password

# -----------------------------------------------------------------------------
# PULSE KERNEL SETTINGS
# -----------------------------------------------------------------------------
PULSE_API_URL=http://django:8000
PULSE_CONFIG=/app/pulse_config.yaml
PULSE_JOURNAL_PATH=/app/data/journal

# -----------------------------------------------------------------------------
# STREAMLIT SETTINGS
# -----------------------------------------------------------------------------
STREAMLIT_SERVER_PORT=8501
# Additional dashboard (UAT/info) port
WIKI_DASHBOARD_PORT=8503

# -----------------------------------------------------------------------------
# ORCHESTRATOR / ACTIONS CLIENT (used by utils/test_trades_flow.py etc.)
# -----------------------------------------------------------------------------
API_URL=http://localhost:8010
API_TOKEN=

# -----------------------------------------------------------------------------
# CELERY SETTINGS
# -----------------------------------------------------------------------------
CELERY_APP=app
CELERY_CONCURRENCY=3

# -----------------------------------------------------------------------------
# DISCORD NOTIFICATIONS (Default)
# -----------------------------------------------------------------------------
DISCORD_WEBHOOK_URL=your_discord_webhook_url_here

# -----------------------------------------------------------------------------
# TELEGRAM NOTIFICATIONS (Legacy - Optional)
# -----------------------------------------------------------------------------
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
TELEGRAM_CHAT_ID=your_telegram_chat_id_here

# -----------------------------------------------------------------------------
# DISCORD BOT SETTINGS (Optional)
# -----------------------------------------------------------------------------
# Discord bot token used for bot authentication
DISCORD_BOT_TOKEN=your_discord_bot_token_here
# Channel where the bot should post messages
DISCORD_CHANNEL_ID=your_discord_channel_id_here
# Optional comma-separated list of allowed channel IDs
DISCORD_CHANNEL_WHITELIST=
MCP_MEMORY_API_URL=http://mcp-memory:8000

# -----------------------------------------------------------------------------
# ALERT SETTINGS
# -----------------------------------------------------------------------------
ALERTS_ENABLED=true
ALERTS_MIN_INTERVAL_SECONDS=60
ALERTS_SCORE_HI=90
ALERTS_TOXICITY_LIMIT=0.30
ALERTS_DD_INTRADAY_WARN=0.025

# -----------------------------------------------------------------------------
# PREDICTION CRON SETTINGS
# -----------------------------------------------------------------------------
RISK_THRESHOLD=0.9
PREDICT_CRON_INTERVAL=900
PREDICT_CRON_SYMBOL=EURUSD
PREDICT_CRON_PRICE=1.2345
PREDICT_CRON_RISK=0.95
PREDICT_CRON_CONFIG=config/predict_cron.yaml

# -----------------------------------------------------------------------------
# MONITORING PORTS (Optional - uses defaults if not set)
# -----------------------------------------------------------------------------
PROMETHEUS_PORT=9090
ALERTMANAGER_PORT=9093
GRAFANA_PORT=3000

# -----------------------------------------------------------------------------
# MONITORING VERSIONS (Optional - uses defaults if not set)
# -----------------------------------------------------------------------------
GRAFANA_VERSION=11.0.0
PROMETHEUS_VERSION=v2.42.0
CADVISOR_VERSION=v0.46.0
NODE_EXPORTER_VERSION=v1.5.0
ALERTMANAGER_VERSION=v0.25.0

# -----------------------------------------------------------------------------
# OLLAMA SETTINGS
# -----------------------------------------------------------------------------
# Base URL for the Ollama service
OLLAMA_URL=http://localhost:11434
# Default model identifier
OLLAMA_MODEL=llama3:8b-instruct-q4

# -----------------------------------------------------------------------------
# VECTOR DATABASE SETTINGS
# -----------------------------------------------------------------------------
# Generic vector database URL (alias for Qdrant or another backend)
VECTOR_DB_URL=http://qdrant:6333
# Base URL for the Qdrant vector database service
QDRANT_URL=http://qdrant:6333
# API key for Qdrant (leave empty if not required)
QDRANT_API_KEY=
