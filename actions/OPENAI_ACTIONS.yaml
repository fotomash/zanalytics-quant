actions:
  - name: actions_read
    description: Query a read-only action via alias endpoint
    endpoint: /api/v1/actions/read
    method: GET
    parameters:
      type: object
      properties:
        type:
          type: string
          enum:
            - session_boot
            - trades_recent
            - trades_history_mt5
            - account_info
            - account_positions
            - account_risk
            - equity_today
            - market_mini
            - market_snapshot
            - market_symbols
            - market_calendar_next
            - market_regime
            - liquidity_map
            - state_snapshot
            - journal_recent
            - whisper_suggest
        limit:
          type: integer
        symbol:
          type: string
        timeframe:
          type: string
        date_from:
          type: string
        date_to:
          type: string
        pnl_min:
          type: number
        pnl_max:
          type: number
        user_id:
          type: string
    required: [type]

  - name: actions_query
    description: Query a read-only action
    endpoint: /api/v1/actions/query
    method: GET
    parameters:
      type: object
      properties:
        type:
          type: string
          enum:
            - session_boot
            - trades_recent
            - trades_history_mt5
            - account_info
            - account_positions
            - account_risk
            - equity_today
            - market_mini
            - market_snapshot
            - market_symbols
            - market_calendar_next
            - market_regime
            - liquidity_map
            - state_snapshot
            - journal_recent
            - whisper_suggest
        limit:
          type: integer
        symbol:
          type: string
        timeframe:
          type: string
        date_from:
          type: string
        date_to:
          type: string
        pnl_min:
          type: number
        pnl_max:
          type: number
        user_id:
          type: string
    required: [type]

  - name: actions_execute
    description: Execute an action via the Actions Bus
    endpoint: /api/v1/actions/query
    method: POST
    parameters:
      type: object
      properties:
        type:
          type: string
          enum:
            - position_open
            - position_close
            - position_modify
            - position_hedge
            - session_boot
            - state_snapshot
            - trades_recent
            - trades_history_mt5
            - account_info
            - account_positions
            - account_risk
            - equity_today
            - pulse_status
            - market_mini
            - market_snapshot
            - market_symbols
            - market_calendar_next
            - market_regime
            - liquidity_map
            - opportunity_priority_items
            - journal_recent
            - journal_append
            - behavior_events
            - whisper_suggest
      payload:
        type: object
        additionalProperties: true
    required: [type, payload]

  - name: position_close
    description: Close full or partial position
    endpoint: /api/v1/positions/close
    method: POST
    parameters:
      type: object
      properties:
        ticket:
          type: integer
          description: Trade ticket ID to close
        fraction:
          type: number
          minimum: 0.01
          maximum: 1.0
          description: Optional fraction of position volume to close (default full close)
        volume:
          type: number
          description: Optional absolute lots to close (overrides fraction if provided)
      required: [ticket]

  - name: position_modify
    description: Modify SL/TP for an existing position
    endpoint: /api/v1/positions/modify
    method: POST
    parameters:
      type: object
      properties:
        ticket:
          type: integer
          description: Trade ticket ID
        sl:
          type: number
          description: New stop-loss price
        tp:
          type: number
          description: New take-profit price
      required: [ticket]

  - name: position_modify_by_ticket
    description: Modify SL/TP for an existing position by ticket path
    endpoint: /api/v1/positions/{ticket}/modify
    method: POST
    parameters:
      type: object
      properties:
        ticket:
          type: integer
          description: Trade ticket ID (path parameter)
        sl:
          type: number
          description: New stop-loss price
        tp:
          type: number
          description: New take-profit price
      required: [ticket]

  - name: position_hedge
    description: Open an opposite-side hedge order for a position
    endpoint: /api/v1/positions/hedge
    method: POST
    parameters:
      type: object
      properties:
        ticket:
          type: integer
          description: Trade ticket ID to hedge
        volume:
          type: number
          description: Optional hedge volume (defaults to full position volume)
      required: [ticket]

  - name: trade_open
    description: Open a new trading position
    endpoint: /trade/open
    method: POST
    parameters:
      type: object
      properties:
        symbol: { type: string }
        side: { type: string, enum: [buy, sell] }
        volume: { type: number }
        type: { type: string, enum: [market, limit, stop], nullable: true }
        price: { type: number, nullable: true }
        sl: { type: number, nullable: true }
        tp: { type: number, nullable: true }
        deviation: { type: integer, nullable: true }
        client_order_id: { type: string, nullable: true }
      required: [symbol, side, volume]

  - name: trade_close
    description: Close an existing trading position
    endpoint: /trade/close
    method: POST
    parameters:
      type: object
      properties:
        ticket: { type: integer, description: Trade ticket ID to close }
        volume: { type: number, nullable: true, description: Optional volume to close }
        deviation: { type: integer, nullable: true }
      required: [ticket]

  - name: trade_modify
    description: Modify stop-loss or take-profit for a position
    endpoint: /trade/modify
    method: POST
    parameters:
      type: object
      properties:
        ticket: { type: integer, description: Trade ticket ID }
        sl: { type: number, nullable: true }
        tp: { type: number, nullable: true }
      required: [ticket]
