FROM python:3.11-slim

WORKDIR /app

COPY requirements.txt /app/
RUN pip install --no-cache-dir -r requirements.txt

COPY services/redis_to_kafka_mirror.py /app/

ENV REDIS_URL=redis://redis:6379/0 \
    KAFKA_BROKERS=kafka:9092 \
    TICKS_PATTERN=ticks.*

CMD ["python", "-u", "redis_to_kafka_mirror.py"]

