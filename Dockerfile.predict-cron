FROM python:3.11-slim
WORKDIR /app

ARG INSTALL_DEV=false

COPY requirements/ requirements/
RUN pip install --no-cache-dir -r requirements/prod.txt \
    && if [ "$INSTALL_DEV" = "true" ]; then pip install --no-cache-dir -r requirements/dev.txt -r requirements/optional.txt; fi

COPY scripts/predict_cron.py ./predict_cron.py
COPY config/predict_cron.yaml ./config/predict_cron.yaml

CMD ["python", "predict_cron.py"]
